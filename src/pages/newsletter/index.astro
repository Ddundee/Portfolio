---
import Layout from '../../layouts/Layout.astro'
import Parser from 'rss-parser';

let date = new Date();
let currentDate = (date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear();

const parser = new Parser();

let {title, items}: {title?: string, items: any} = await parser.parseURL('https://zapier.com/engine/rss/8957482/newsletter-flapeld');
for (let i = 0; i < items.length; i++) items[i].content = items[i].content?.split('\n');
---

<Layout title="Test">
    <div class='w-full h-3' />
    <div class='flex justify-end w-full'>
         <a href='/'>
            <button class='px-3 py-1 text-center text-white duration-150 bg-black border border-black border-opacity-100 rounded select-none hover:duration-150 hover:bg-white hover:text-black'>Go Home</button>
        </a>
    </div>
    <div class='w-full h-52' />
    <p>Published on: {currentDate}</p>
    <h1 class='mb-3 text-6xl font-bold leading-tight text-gray-900'>{title}</h1>
    {items[0].content.map((item:string) => <p>{item}</p>)}
    <ul>
        {items.map((item:any) => <li><a href={`/newsletter/${item.guid}`}>{item.guid}</a></li>)}
    </ul>
    
</Layout>
